[gd_scene load_steps=18 format=3 uid="uid://cons778vrglqa"]

[ext_resource type="Script" uid="uid://cvbtqc3mi6nk2" path="res://scripts/static_body_3d.gd" id="1_hj1ab"]
[ext_resource type="PackedScene" uid="uid://u87gi2y70jjc" path="res://scenes/player.tscn" id="1_yuxya"]
[ext_resource type="PackedScene" uid="uid://dwlqvhg0wn8t3" path="res://scenes/obstaclespawner.tscn" id="2_w8585"]
[ext_resource type="Shader" uid="uid://dl4o0kf35kgtn" path="res://shaders/retromodel.gdshader" id="3_r2c4n"]
[ext_resource type="Texture2D" uid="uid://bfw1oxo8cgc26" path="res://Resources/PixelArt3D/Grass 2.png" id="4_r2c4n"]
[ext_resource type="Texture2D" uid="uid://bbs27tfqkm51q" path="res://Resources/PixelArt3D/skyboxsupermario.jpg" id="5_2ejc5"]
[ext_resource type="FontFile" uid="uid://c6eaablg8a0gc" path="res://Resources/font.ttf" id="7_n0c6x"]
[ext_resource type="Shader" uid="uid://cnych07wnucrv" path="res://shaders/pixelretro.gdshader" id="7_wjviv"]
[ext_resource type="Script" uid="uid://ds8shmksraybf" path="res://retropixeleffect.gd" id="8_4srvn"]
[ext_resource type="Script" uid="uid://d3660jnio0pgm" path="res://scripts/scorelabel.gd" id="10_4rw3y"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_22asa"]
panorama = ExtResource("5_2ejc5")

[sub_resource type="Sky" id="Sky_w8585"]
sky_material = SubResource("PanoramaSkyMaterial_22asa")

[sub_resource type="Environment" id="Environment_hj1ab"]
background_mode = 2
sky = SubResource("Sky_w8585")
tonemap_mode = 2

[sub_resource type="ShaderMaterial" id="ShaderMaterial_4srvn"]
render_priority = 0
shader = ExtResource("3_r2c4n")
shader_parameter/custom_texture = ExtResource("4_r2c4n")
shader_parameter/use_custom_texture = true
shader_parameter/texture_offset = Vector2(0, 0)
shader_parameter/texture_scale = Vector2(50, 5.375)
shader_parameter/texture_rotation = 0.0
shader_parameter/color_steps = 6.0
shader_parameter/dither_strength = -0.07
shader_parameter/pixel_size = 1.0

[sub_resource type="BoxMesh" id="BoxMesh_op2k8"]
material = SubResource("ShaderMaterial_4srvn")

[sub_resource type="BoxShape3D" id="BoxShape3D_yuxya"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wjviv"]
shader = ExtResource("7_wjviv")
shader_parameter/shake = 0.015
shader_parameter/noiseQuality = 250.0
shader_parameter/noiseIntensity = 0.001
shader_parameter/offsetIntensity = 0.003
shader_parameter/colorOffsetIntensity = 0.2
shader_parameter/pixelSize = 700.0
shader_parameter/grainIntensity = 0.01
shader_parameter/use_overlay = false
shader_parameter/use_lens_distortion = false
shader_parameter/overlay_color = Color(1, 1, 1, 10)
shader_parameter/lens_distortion_strength = 0.05

[node name="Main" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.0554007, 0.724763, -0.686767, -0.439095, 0.600056, 0.668677, 0.896731, 0.338601, 0.284996, -6.59054, 12.7903, 0.257678)
light_volumetric_fog_energy = 2.0
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_hj1ab")

[node name="StaticBody3D" type="StaticBody3D" parent="."]
transform = Transform3D(390.7, -0.0104761, -0.0496303, 0.925707, 4.43259, 0.201275, 0.470447, -0.021868, 40.8218, 54.5692, -2.05438, 0)
collision_layer = 3
collision_mask = 3
script = ExtResource("1_hj1ab")

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D"]
mesh = SubResource("BoxMesh_op2k8")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("BoxShape3D_yuxya")

[node name="Player" parent="." instance=ExtResource("1_yuxya")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -136.897, 1.123, 0.740004)

[node name="obstaclespawner" parent="." instance=ExtResource("2_w8585")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 195.06, 1.31838, 18.0864)

[node name="obstaclespawner2" parent="." instance=ExtResource("2_w8585")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 195.06, 1.06518, 10.6337)

[node name="obstaclespawner3" parent="." instance=ExtResource("2_w8585")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 195.06, 1.06518, 0.856322)

[node name="obstaclespawner4" parent="." instance=ExtResource("2_w8585")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 195.288, 1.06518, -8.65632)

[node name="obstaclespawner5" parent="." instance=ExtResource("2_w8585")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 195.06, 1.06518, -18.7095)

[node name="scorelabel" type="RichTextLabel" parent="."]
offset_left = -4.0
offset_right = 623.0
offset_bottom = 483.0
mouse_filter = 2
theme_override_constants/outline_size = 30
theme_override_fonts/normal_font = ExtResource("7_n0c6x")
theme_override_font_sizes/normal_font_size = 71
text = " Score
"
script = ExtResource("10_4rw3y")

[node name="scoretimer" type="Timer" parent="scorelabel"]
autostart = true

[node name="timelabel" type="RichTextLabel" parent="scorelabel"]
offset_left = 1.0
offset_top = 83.0
offset_right = 483.0
offset_bottom = 179.0
mouse_filter = 2
theme_override_constants/outline_size = 25
theme_override_fonts/normal_font = ExtResource("7_n0c6x")
theme_override_font_sizes/normal_font_size = 60
text = " Time
"

[node name="announcer" type="RichTextLabel" parent="."]
offset_left = 779.0
offset_top = 14.0
offset_right = 1374.0
offset_bottom = 161.0
mouse_filter = 2
theme_override_constants/outline_size = 30
theme_override_fonts/normal_font = ExtResource("7_n0c6x")
theme_override_font_sizes/normal_font_size = 71
bbcode_enabled = true
text = " Announcer
"

[node name="retropixeleffect" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_wjviv")
offset_right = 1924.0
offset_bottom = 1092.0
mouse_filter = 2
script = ExtResource("8_4srvn")

[connection signal="timeout" from="scorelabel/scoretimer" to="scorelabel" method="_on_scoretimer_timeout"]
